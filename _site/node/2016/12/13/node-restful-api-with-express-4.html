<p><strong>Prequsite</strong></p>

<p>You must have mongo installed:</p>

<ul>
  <li><a href="http://develdoe.com/2016/ubuntu-mongo-db-ce/">Ubuntu - Install and start Monddb</a></li>
  <li><a href="http://develdoe.com/2016/osx-mongo-db/">OSX - Install and start Monddb</a></li>
</ul>

<p><strong>package.json</strong></p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="o">{</span>
    <span class="s2">"name"</span>: <span class="s2">"starwaves"</span>,
    <span class="s2">"main"</span>: <span class="s2">"server.js"</span>,
    <span class="s2">"dependencies"</span>: <span class="o">{</span>
        <span class="s2">"express"</span>: <span class="s2">"~4.0.0"</span>,
        <span class="s2">"mongoose"</span>: <span class="s2">"~3.6.13"</span>,
        <span class="s2">"body-parser"</span>: <span class="s2">"~1.0.1"</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p><strong>server.js</strong></p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// file: server.js</span>

<span class="c1">// Base Setup</span>
<span class="c1">// =============================================================================</span>

<span class="kd">var</span> <span class="nx">express</span>     <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">app</span>         <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>
<span class="kd">var</span> <span class="nx">bodyParser</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'body-parser'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">Bear</span>        <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./app/models/bear'</span><span class="p">)</span>

<span class="c1">// Database connection</span>
<span class="c1">// ----------------------------------------------------</span>

<span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'mongoose'</span><span class="p">)</span>
<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'mongodb://localhost:27017/db'</span><span class="p">)</span>

<span class="c1">// body parser will let us get data from a post</span>
<span class="c1">// ----------------------------------------------------</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span><span class="na">extended</span><span class="p">:</span><span class="kc">true</span><span class="p">}))</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>

<span class="c1">// Setup</span>
<span class="c1">// ----------------------------------------------------</span>

<span class="kd">var</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">8080</span>

<span class="c1">// Routes</span>
<span class="c1">// =============================================================================</span>
<span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">()</span>

<span class="c1">// middleware</span>
<span class="c1">// ----------------------------------------------------</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">,</span><span class="nx">next</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'hitting the api'</span><span class="p">)</span>
    <span class="nx">next</span><span class="p">()</span>
<span class="p">})</span>

<span class="c1">// ----------------------------------------------------</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="na">message</span><span class="p">:</span> <span class="s1">'response from api'</span><span class="p">})</span>
<span class="p">})</span>

<span class="c1">// /api/bears</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">'/bears'</span><span class="p">)</span>

    <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">bear</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Bear</span><span class="p">()</span>
            <span class="nx">bear</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span>

            <span class="nx">bear</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="na">message</span><span class="p">:</span> <span class="s1">'bear created'</span><span class="p">})</span>
            <span class="p">})</span>
    <span class="p">})</span>


<span class="c1">// Register routes</span>
<span class="c1">// ----------------------------------------------------</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/api'</span><span class="p">,</span> <span class="nx">router</span><span class="p">)</span>

<span class="c1">// Boot</span>
<span class="c1">// =============================================================================</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Magic on port: '</span> <span class="o">+</span> <span class="nx">port</span><span class="p">)</span>
</code></pre>
</div>

<p><strong>/app/models/bear.js</strong></p>

<p>```js</p>
